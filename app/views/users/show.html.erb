<h2>MY PAGE</h2>
<%= @user.name %>
<%= image_tag @user.image_url, size: "250x200" if @user.image? %>
<%= @user.profile %>
<%= render "relationships/follow_button", user: @user %>

<% if current_user.id == @user.id %>
  <%= link_to "設定", edit_user_registration_path %>
<% end %>

<div class="tab_wrap">
	<input id="tab1" type="radio" name="tab_btn" checked>
  <input id="tab2" type="radio" name="tab_btn">
  <input id="tab3" type="radio" name="tab_btn">
	

	<div class="tab_area">
		<label class="tab1_label" for="tab1">投稿</label>
    <label class="tab2_label" for="tab2">いいね</label>
    <label class="tab3_label" for="tab3">ルート</label>
  </div>
  
	<div class="panel_area">
		<div id="panel1" class="tab_panel">
      <p><% @user.spots.each do |t| %>
        <div class="spot">
          <a href="/spots/<%= t.id %>"><%= image_tag t.image_url, size: "250x200" if t.image? %>
          <%= t.about %>
          </a>
          <%= t.created_at %> 
        </div>  
      <% end %></p>
    </div>
    
		<div id="panel2" class="tab_panel">
      <div class="contents_likes">
       <div class="spot">
         <% @likes.each do |like| %>
           <% spot = Spot.find_by(id: like.spot_id) %>
           <a href="/spots/<%= spot.id %>"><%= image_tag spot.image_url, size: "250x200" if spot.image? %>
           </a>
         <% end %>
        </div> 
     </div>
    </div>
    
    <div id="panel3" class="tab_panel">
      <p>ルート</p>
      <div id="map">
</div>

<style>
#map{
  height: 400px;
}
</style>

<script>
function initMap(){
  geocoder = new google.maps.Geocoder()

  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 40.7828, lng:-73.9653},
    zoom: 12,
  });

  marker = new google.maps.Marker({
    position:  {lat: 40.7828, lng:-73.9653},
    map: map
  });
}


let geocoder

function codeAddress(){
  let inputAddress = document.getElementById('address').value;

  geocoder.geocode( { 'address': inputAddress}, function(results, status) {
    if (status == 'OK') {
      map.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
          map: map,
          position: results[0].geometry.location
      });
    } else {
      alert('該当する結果がありませんでした：' + status);
    }
  });   
}

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOuA6uXgQmVvl0_ThQD4ZTTb3oBiU96hY&callback=initMap" async defer></script>
      
		</div>
		
  </div>
  <style>
  .tab_wrap{width:500px; margin:80px auto;}
  .tab_area{font-size:0; margin:0 10px;}
  .tab_area label{width:150px; margin:0 5px; display:inline-block; padding:12px 0; color:#999; background:#ddd; text-align:center; font-size:13px; cursor:pointer; transition:ease 0.2s opacity;}
  .tab_area label:hover{opacity:0.5;}
  .panel_area{background:#fff;}
  .tab_panel{width:100%; padding:80px 0; display:none;}
  .tab_panel p{font-size:14px; letter-spacing:1px; text-align:center;}
  
  .tab_area label.active{background:#fff; color:#000;}
  .tab_panel.active{display:block;}
  </style>
</div>


